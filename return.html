<html>
<head><title>You have successfully logged on with Amazon!</title></title>
<style>
body {
text-align: center;
font-family: sans-serif;
}
</style>
<body>
  


<script type="text/javascript">
  function retrieveProfile(access_token){
    amazon.Login.retrieveProfile(access_token, function(response) {
             alert('Hello, ' + response.profile.Name);
             alert('Your e-mail address is ' + response.profile.PrimaryEmail);
             alert('Your unique ID is ' + response.profile.CustomerId);
             if ( window.console && window.console.log )
                window.console.log(response);
         }
   }
 </script>
  
  
<script type="text/javascript">
  var display= null;
  var accessToken = null;
function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, '\\$&');
    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
}
  function getAccessToken() {
    var url = window.location;

    var token = new URL(url).hash.split('&').filter(function(el) { if(el.match('access_token') !== null) return true; })[0].split('=')[1];  
    alert('PPP Here you go' + token);
    return token;
  }
  
  display=getParameterByName("error_description");
  if (display != null) {
  document.write("<p>Access Denied!</p>");
  }
  else {
    accessToken = getParameterByName("access_token");
    alert('Hello NNN the access token is ' + getAccessToken());
    retrieveProfile(getAccessToken());
  }
</script>
</body>
</html>
